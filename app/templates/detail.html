<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ meta_title }}</title>
    <meta name="description" content="{{ meta_desc }}">
    <link rel="canonical" href="{{ meta_url }}">
    
    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="{{ meta_url }}">
    <meta property="og:title" content="{{ meta_title }}">
    <meta property="og:description" content="{{ meta_desc }}">
    <meta property="og:image" content="{{ request.base_url.scheme }}://{{ request.base_url.netloc }}/static/img/og-image.png">
    
    <link rel="icon" href="/static/img/favicon.ico">
    <link rel="stylesheet" href="/static/css/style.css?v=5.0">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- [SEO] 구조화된 데이터 (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "EducationalOrganization",
      "name": "{{ school.basic_info.name_ja }}",
      "url": "{{ meta_url }}",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "{{ school.basic_info.address }}",
        "addressCountry": "JP"
      },
      "description": "{{ meta_desc }}",
      "sameAs": [
        "{{ school.basic_info.website }}"
      ]
    }
    </script>

    <style>
        .goog-te-banner-frame.skiptranslate { display: none !important; }
        body { top: 0px !important; }
        .goog-tooltip { display: none !important; }
        .goog-te-gadget-simple {
            background-color: transparent !important;
            border: 1px solid #ddd !important;
            padding: 4px 8px !important;
            border-radius: 4px !important;
            font-size: 0.9rem !important;
        }
        .goog-te-gadget-icon { display: none !important; }
    </style>
</head>

<body class="detail-page" style="padding-top: 80px;">

    <header class="main-header" style="position: fixed; top: 0; width: 100%; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
        <div class="header-content">
            <a href="/" class="back-link">
                <i class="fas fa-arrow-left"></i> Back to Map
            </a>
            <div id="google_translate_element"></div>
        </div>
    </header>

    <main class="detail-container">
        <!-- 학교 헤더 -->
        <div class="school-header">
            <h1>{{ school.basic_info.name_ja }}</h1>
            <p class="address"><i class="fas fa-map-marker-alt"></i> {{ school.basic_info.address }}</p>
            
            <div class="school-description">
                {{ content_body | safe }}
            </div>
        </div>

        <!-- 기본 정보 그리드 -->
        <div class="info-grid">
            <div class="info-card">
                <div class="icon-box"><i class="fas fa-users"></i></div>
                <div class="text-box">
                    <span class="label">Capacity</span>
                    <span class="value">
                        {{ school.basic_info.capacity if school.basic_info.capacity else 'N/A' }}
                    </span>
                </div>
            </div>
            {% if school.stats and school.stats.international_students %}
            <div class="info-card">
                <div class="icon-box"><i class="fas fa-globe"></i></div>
                <div class="text-box">
                    <span class="label">Intl. Students</span>
                    <span class="value">{{ school.stats.international_students }}</span>
                </div>
            </div>
            {% endif %}
            <div class="info-card">
                <div class="icon-box"><i class="fas fa-yen-sign"></i></div>
                <div class="text-box">
                    <span class="label">Tuition (1st Year)</span>
                    <span class="value">
                        {% if school.tuition and school.tuition.yearly_tuition %}
                            ¥{{ "{:,}".format(school.tuition.yearly_tuition) }}
                        {% else %}
                            -
                        {% endif %}
                    </span>
                </div>
            </div>
        </div>

        <!-- 특징 태그 -->
        {% if school.features %}
        <section class="detail-section">
            <h2><i class="fas fa-star"></i> Features</h2>
            <ul class="feature-list">
                {% for feature in school.features %}
                <li>{{ feature }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}

        <!-- [삭제됨] Location (Map) Section -->
        
        <!-- 하단 버튼 영역 -->
        <div class="cta-area" style="display: flex; justify-content: center; gap: 15px; margin-top: 50px; padding-bottom: 30px;">
            <!-- 1. 공식 홈페이지 버튼 -->
            {% set link = school.basic_info.website if school.category == 'university' else school.source_url %}
            {% if link %}
            <a href="{{ link }}" target="_blank" class="cta-btn">
                Visit Official Website <i class="fas fa-external-link-alt"></i>
            </a>
            {% else %}
            <button class="cta-btn" disabled style="background:#ccc; cursor:not-allowed;">No Website Available</button>
            {% endif %}

            <!-- 2. [추가됨] 메인으로 돌아가기 버튼 -->
            <a href="/" class="cta-btn" style="background-color: #7f8c8d; box-shadow: 0 4px 15px rgba(127, 140, 141, 0.4);">
                Back to Main <i class="fas fa-home"></i>
            </a>
        </div>
    </main>

    <footer class="main-footer">
        <div class="footer-content">
            <h3>JP Campus</h3>
            <div class="footer-links">
                <a href="/guide">Guide</a>
                <a href="/about">About</a>
                <a href="/policy">Privacy</a>
                <a href="/contact">Contact</a>
            </div>
            <p class="copyright">© 2024 JP Campus. All rights reserved.</p>
        </div>
    </footer>

    <!-- Google Translate Script -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en', 
                includedLanguages: 'en,ja,ko,zh-CN,zh-TW,vi,th,id',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>